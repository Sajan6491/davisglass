<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Davis Glass — Home</title>

  <!-- Google font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <!-- Swiper CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>

  <style>
    /* ========== THEME & TYPOGRAPHY ========== */
    :root{
      --brand: #7b2227;
      --brand-accent: #9b2b31;
      --brand-dark: #55141a;
      --accent: #0B63A8;
      --accent-strong: #0A84FF;
      --bg: #F6F7F8;
      --white: #FFFFFF;
      --text: #0B1720;
      --muted: #64748B;
      --container: 1200px;
      --card-radius: 14px;
      --header-height: 76px;

      /* TYPOGRAPHY SCALE (standardized) */
      --fs-base: 16px;               /* body base */
      --fs-ui: 14px;                 /* small UI text / tabs */
      --fs-title: 18px;              /* product title */
      --fs-sub: 15px;                /* product subtitle */
      --fs-body: 15px;               /* paragraph / description */
      --fs-badge: 12px;              /* badge / labels */
      --fs-h1: clamp(28px, 4.8vw, 46px);
      --fs-h2: clamp(20px, 2.6vw, 28px);

      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    }

    /* reset */
    *,*::before,*::after{ box-sizing:border-box; }
    html,body{ margin:0; padding:0; background:var(--bg); color:var(--text); -webkit-font-smoothing:antialiased; overflow-x:hidden; font-size:var(--fs-base); line-height:1.45; }
    a{ color:var(--accent); text-decoration:none; }
    img{ max-width:100%; display:block; }
    .wrap{ max-width:var(--container); margin:0 auto; padding:0 20px; }

    /* ========== HEADER (sticky) ========== */
    header.header{
      position:fixed; top:0; left:0; right:0; z-index:2200;
      background:var(--white);
      box-shadow:0 8px 22px rgba(11,19,32,0.06);
      height:var(--header-height); display:flex; align-items:center;
      padding:0 6px;
    }
    header.header .wrap{ display:flex; align-items:center; justify-content:space-between; width:100%; gap:12px; }
    .logo img{ height:46px; display:block; object-fit:contain; filter: none; }

    /* nav */
    .nav{ display:flex; align-items:center; gap:14px; flex:1; }
    .nav-list{ display:flex; gap:14px; list-style:none; margin:0; padding:0; align-items:center; justify-content:flex-end; flex:1; }
    .nav-link, .nav-btn{ font-weight:600; padding:10px 14px; border-radius:10px; background:transparent; color:var(--text); cursor:pointer; font-size:var(--fs-ui); transition: all .12s ease; }
    /* .nav-link:hover, .nav-btn:hover{ transform:translateY(-2px); color:var(--brand-dark); } */
    .nav-link.active{ color:var(--brand); }

    button{ -webkit-appearance:none; appearance:none; background:transparent; border:0; }

    :focus { outline: none; }
    :focus-visible { box-shadow: 0 0 0 4px rgba(10,132,255,0.10); border-radius:10px; }

    .nav-btn[aria-expanded="true"]{ box-shadow: 0 6px 18px rgba(10,132,255,0.06); background: rgba(10,132,255,0.03); }

    .nav-item{ position:relative; }

    /* ========== MEGA PANEL ========== */
    .mega-panel{
      position:fixed; left:0; right:0; top:var(--header-height); bottom:0;
      display:flex; justify-content:center; align-items:flex-start;
      pointer-events:none; z-index:2100; overflow:auto;
      opacity:0; transform:translateY(6px) scaleY(.98);
      transition: opacity .25s ease, transform .28s;
    }
    .mega-panel.open{ pointer-events:auto; opacity:1; transform:translateY(0) scaleY(1); }
    .mega-panel .backdrop{ position:absolute; inset:0; background:rgba(0,0,0,0.45); z-index:0; opacity:0; transition:opacity .22s; }
    .mega-panel.open .backdrop{ opacity:1; }
    .mega-panel .inner{ position:relative; z-index:1; max-width:1100px; width:calc(100% - 40px); display:grid; grid-template-columns:1fr 1fr 1fr; gap:24px; margin:40px 20px; padding:26px; background:var(--white); border-radius:12px; box-shadow:0 20px 48px rgba(10,20,30,0.14); }

    .mega-col h4{ margin:0 0 12px; color:var(--brand); font-size:var(--fs-ui); letter-spacing:0.2px; }
    .mega-col ul{ list-style:none; margin:0; padding:0; }
    .mega-col li{ padding:6px 0; }
    .mega-col a{ color:var(--text); font-weight:700; font-size:var(--fs-ui); }
    .mega-right{ grid-column:3/4; display:flex; flex-direction:column; gap:12px; }
    .feature-box{ background:linear-gradient(180deg,#f7fbff,#ffffff); padding:16px; border-radius:8px; box-shadow:0 8px 18px rgba(11,19,32,0.04); }

    /* ========== HAMBURGER (mobile) ========== */
    .hamburger{ display:none; width:48px; height:48px; border-radius:10px; border:0; background:transparent; cursor:pointer; align-items:center; justify-content:center; }
    .hamburger .bar{ display:block; width:24px; height:2px; background:#123; margin:4px 0; transition:transform .25s, opacity .2s; border-radius:2px; }
    .hamburger.open .bar1{ transform:translateY(7px) rotate(45deg); } .hamburger.open .bar2{ opacity:0; } .hamburger.open .bar3{ transform:translateY(-9px) rotate(-45deg); }
    .mobile-panel{ display:none; position:fixed; inset:var(--header-height) 0 0 0; background:var(--white); z-index:2300; overflow:auto; padding:20px; }
    .mobile-panel.open{ display:block; }
    .mobile-list{ list-style:none; padding:12px; margin:0; }
    .mobile-item{ padding:14px; border-bottom:1px solid #eef2f6; font-weight:700; font-size:var(--fs-ui); }
    @media (max-width:980px){
      .nav-list{ display:none }
      .hamburger{ display:flex; flex-direction: column; }
      .mega-panel{ display:none !important }
    }

    /* ensure content not hidden behind fixed header */
    main, section.split-hero, #products-showcase-improved, footer { margin-top: calc(var(--header-height)); }

    .container{ max-width:var(--container); margin:0 auto; padding:20px; }

    /* ========== HERO / SLIDER (refined UI) ========== */
    .split-hero{ width:100%; min-height:60vh; max-height:78vh; position:relative; overflow:visible; background:#07101a; padding:28px 0 14px; }
    .wrap-hero{ max-width:1200px; margin:0 auto; padding:0 20px; }

    .hero-area { display:grid; grid-template-columns:1fr; gap:12px; align-items:start; position:relative; }
    .hero-swiper { width:100%; height:calc(60vh); border-radius:14px; overflow:hidden; position:relative; box-shadow:0 18px 48px rgba(6,12,20,0.22); background:#08121a; }
    .hero-slide { width:100%; height:100%; position:relative; display:block; }

    /* hero background + dark overlay */
    .hero-bg { position:absolute; inset:0; background-size:cover; background-position:center; transform:scale(1.06); transition:transform 1.6s ease, filter 1.6s ease; filter:brightness(.95) contrast(.98); z-index:1; }
    .hero-bg::after {
      content: "";
      position:absolute;
      inset:0;
      background: linear-gradient(rgba(2,6,12,0.42), rgba(2,6,12,0.42));
      pointer-events:none;
      z-index:2;
    }
    .swiper-slide-active .hero-bg { transform:scale(1); filter:brightness(1) contrast(1); }

    /* overlay card inside slide - stronger contrast */
    .hero-card {
      position:absolute;
      left:6%;
      top:50%;
      transform:translateY(-50%);
      max-width:560px;
      background: rgba(3,6,12,0.56); /* darker so white text is always readable */
      color:#fff;
      padding:32px;
      border-radius:16px;
      box-shadow: 0 36px 80px rgba(3,6,12,0.6);
      border:1px solid rgba(255,255,255,0.06);
      z-index:6;
      opacity:0;
      transition: transform .6s cubic-bezier(.2,.9,.2,1), opacity .5s ease;
      will-change:transform,opacity;
      backdrop-filter: blur(6px) saturate(1.05);
    }
    .swiper-slide-active .hero-card { opacity:1; transform:translateY(-50%) translateX(0); }

    .hero-card h2{ margin:0 0 10px; font-size:var(--fs-h1); line-height:1.02; font-weight:800; color:#fff; text-shadow: 0 6px 20px rgba(1,1,1,0.35); }
    .hero-card p{ margin:0 0 14px; color:rgba(255,255,255,0.92); font-size:var(--fs-ui); }

    /* actions inside card */
    .btns { display:flex; gap:12px; flex-wrap:wrap; align-items:center; }
    .btn { padding:10px 14px; border-radius:10px; font-weight:800; cursor:pointer; text-decoration:none; display:inline-block; font-size:var(--fs-ui); }
    .btn.brand-primary { background:linear-gradient(90deg,var(--brand),var(--brand-dark)); color:#fff; box-shadow:0 12px 30px rgba(127,35,42,0.14); border:0; }
    .btn.ghost { background:transparent; color:#fff; border:1px solid rgba(255,255,255,0.14); }

    /* controls */
    .swiper-button-prev, .swiper-button-next {
      position:absolute; top:50%; transform: translateY(-50%);
      width:52px;height:52px;border-radius:999px;display:flex;align-items:center;justify-content:center;
      background:rgba(6,10,15,0.36); color:#fff; box-shadow:0 12px 30px rgba(2,8,23,0.28); z-index:8; border:0; cursor:pointer;
    }
    .swiper-button-prev{ left:18px; } .swiper-button-next{ right:18px; }

    .swiper-button-prev:after, .swiper-button-next:after {
      font-size:20px;
      color: #fff;
      opacity:1;
    }

    .swiper-pagination{ bottom:12px !important; z-index:9; }
    .swiper-pagination-bullet { width:10px; height:10px; opacity:.9; background:rgba(255,255,255,0.9); border-radius:999px; }
    .swiper-pagination-bullet-active { transform:scale(1.35); background:#fff; }

    .thumbs { margin-top:12px; display:flex; justify-content:center; gap:12px; pointer-events:auto; user-select:none; z-index:6; }
    .thumb { width:140px; height:78px; border-radius:12px; background-size:cover; background-position:center; box-shadow:0 8px 20px rgba(6,12,20,0.08); border:3px solid rgba(255,255,255,0.04); cursor:pointer; transition:transform .18s, border-color .18s; }
    .thumb.active { transform:scale(1.04); border-color: rgba(155,43,49,0.18); box-shadow:0 12px 34px rgba(155,43,49,0.06); }

    @media (max-width:920px){
      .hero-card{ left:50%; transform:translate(-50%,-50%); top:64%; width:92%; max-width:480px; padding:20px; border-radius:12px; }
      .hero-swiper{ height:48vh; }
      .thumb{ width:92px; height:56px; border-radius:10px; }
      .logo img{ height:42px; }
    }

    /* ======= REPLACEMENT: PRODUCTS SECTION (paste in place of your old PRODUCTS CSS) ======= */
    #products-showcase-improved {
      background:#fff;
      padding:44px 0 56px;
      border-top:1px solid rgba(8,18,30,0.04);
    }

    .psi-inner{ max-width:var(--container); margin:0 auto; padding:0 18px; }

    /* two-column head: left narrow title + right area for filters + grid */
    .psi-head {
      display:grid;
      grid-template-columns: 364px 1fr;
      gap:28px;
      align-items:start;
      margin-bottom:18px;
      align-items: start;
    }

    /* left column */
    .psi-head > div:first-child { padding-right:6px; }
    #psi-title{ font-size:var(--fs-h2); margin:0; color:var(--brand); font-weight:800; letter-spacing:0.2px; }
    .psi-lead{ margin:10px 0 0; color:var(--muted);  font-size:var(--fs-body); line-height:1.5; }

    /* right column container for filters + grid */
    .psi-right { display:flex; flex-direction:column; gap:12px; min-width:0; }

    /* filters: horizontal scroll on small screens; no visual clipping */
    .psi-filters {
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:nowrap;
      overflow-x:auto;
      -webkit-overflow-scrolling:touch;
      padding:6px 8px;
      border-radius:10px;
      background:transparent;
      /* ensure scroll container doesn't force overflow on parent */
      min-width:0;
    }

    /* scrollbar visuals (optional) */
    .psi-filters::-webkit-scrollbar{ height:8px; }
    .psi-filters::-webkit-scrollbar-thumb{ background: rgba(0,0,0,0.06); border-radius:999px; }

    .psi-tab{
      background:transparent;
      border:1px solid rgba(10,20,30,0.06);
      padding:10px 14px;
      border-radius:999px;
      font-weight:700;
      cursor:pointer;
      color:var(--text);
      font-size:var(--fs-ui);
      white-space:nowrap;
      flex:0 0 auto;
    }
    .psi-tab[aria-selected="true"]{
      background:linear-gradient(90deg,var(--accent),var(--accent-strong));
      color:#fff;
      border-color:transparent;
      box-shadow:0 10px 26px rgba(10,132,255,0.08);
      transform:translateY(-2px);
    }

    /* GRID & CARDS
       - ensure grid does not overflow container
       - align cards to start so heights don't cause clipping
       - ensure images are consistent and not cropped awkwardly
    */
    .psi-grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:20px;
      align-items:start;   /* important: align to top so cards don't misalign */
      margin-top:6px;
      /* prevent inadvertent overflow from images */
      min-width:0;
      width:100%;
    }

    .psi-card{
      background:#fff;
      border-radius:12px;
      overflow:visible;             /* allow shadow / card content to be visible */
      display:flex;
      flex-direction:column;
      box-shadow:0 10px 34px rgba(6,12,20,0.06);
      transition:transform .25s, box-shadow .25s;
      border:1px solid rgba(6,12,20,0.03);
      outline:none;
      min-height:360px;
      align-self: start;            /* ensure each card starts at top of grid cell */
    }

    .psi-card:hover{ transform:translateY(-8px); box-shadow:0 28px 64px rgba(6,12,20,0.12); }

    /* media block: fix height, maintain cover and center */
    .psi-media{
      height:200px;                 /* consistent height for thumbnails */
      min-height:140px;
      background-size:cover !important;
      background-position:center center !important;
      border-radius:10px 10px 0 0;
      display:block;
    }

    /* body & content */
    .psi-body{ padding:18px; display:flex; flex-direction:column; gap:12px; flex:1; min-height:0; }
    .psi-badge{ display:inline-block; padding:6px 10px; background:rgba(155,43,49,0.08); color:var(--brand); border-radius:999px; font-weight:800; font-size:var(--fs-badge); letter-spacing:0.4px; text-transform:uppercase; width: fit-content; }
    .psi-title{ margin:0; font-size:var(--fs-title); color:var(--brand); font-weight:800; line-height:1.15; }
    .psi-desc{ margin:0; color:var(--muted); font-size:var(--fs-body); line-height:1.4; }

    .psi-actions{ display:flex; gap:10px; margin-top:auto; align-items:center; }
    .psi-btn-primary{ background: linear-gradient(90deg, var(--brand), var(--brand-dark)); color:#fff; padding:10px 14px; border-radius:10px; font-weight:800; border:0; cursor:pointer; font-size:var(--fs-ui); }
    .psi-btn-ghost{ background:transparent; padding:10px 14px; border-radius:10px; border:1px solid rgba(6,12,20,0.06); color:var(--text); font-weight:700; font-size:var(--fs-ui); }

    .psi-accordion-toggle{ display:inline-block; background:transparent; border:0; color:var(--accent); font-weight:700; padding:6px 0; cursor:pointer; font-size:var(--fs-ui); }

    /* clamp .psi-desc to 3 lines with ellipsis */
    .psi-desc{
      display: -webkit-box;        /* needed for webkit line-clamp */
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 3;      /* number of lines to show */
      overflow: hidden;
      text-overflow: ellipsis;
      line-height: 1.4;           /* keep same as your design */
      max-height: calc(1.4em * 3);/* optional safety to avoid extra height */
      word-break: break-word;     /* avoid overflow from very long words */
    }

    /* RESPONSIVE: keep filters visible but let them wrap on small widths,
       reflow head into single column so cards start under title on mobile */
    @media (max-width:1200px){ .psi-grid{ grid-template-columns: repeat(3, 1fr); } }

    @media (max-width:1000px){
      .psi-head{ grid-template-columns: 1fr; gap:10px; }
      .psi-head > div:first-child { order:1; }
      .psi-right { order:2; }
      .psi-grid{ grid-template-columns: repeat(2, 1fr); }
      /* allow filters to wrap on medium screens (avoid overflow) */
      .psi-filters{ flex-wrap:wrap; overflow-x:visible; }
    }

    @media (max-width:640px){
      .psi-grid{ grid-template-columns:1fr; }
      .psi-media{ height:220px; }
      .psi-filters{ gap:8px; padding:6px 4px; }
      .psi-head > div:first-child { max-width:100%; }
    }

    /* when hiding cards (filter applied), keep layout stable */
    .psi-card.hidden{ opacity:0; transform:scale(.98); pointer-events:none; height:0; margin:0; padding:0; overflow:hidden; transition: all .28s ease; }

    /* modal */
    .psi-modal-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,0.55); display:none; align-items:center; justify-content:center; z-index:4000; padding:20px; }
    .psi-modal-backdrop.open{ display:flex; }
    .psi-modal{ background:#fff; width:100%; max-width:920px; border-radius:12px; box-shadow:0 30px 80px rgba(6,12,20,0.4); overflow:auto; max-height:90vh; justify-content: space-between; }
    .psi-modal .modal-body{ padding:20px; display:grid; grid-template-columns:1fr 1fr; gap:20px; align-items:start; }
    .psi-modal .modal-media{ height:260px; background-size:cover; background-position:center; border-radius:8px; }

    /* footer */
    .footer{ background: linear-gradient(180deg, #07101A, #07101A); margin-top: 28px; padding: 54px 20px; color: var(--white); }
    .footer .grid{ display:grid; grid-template-columns:1.6fr 1fr 1fr; gap:20px; max-width:var(--container); margin:0 auto; align-items:start; }
    @media (max-width:880px){ .footer .grid{ grid-template-columns:1fr; gap:12px } }

    /* dev log */
    #dev-log{ position:fixed; right:12px; bottom:12px; z-index:9999; background:rgba(0,0,0,0.75); color:#fff; padding:8px 10px; font-size:12px; border-radius:8px; max-width:320px; max-height:220px; overflow:auto; display:none; }
    #dev-log.show{ display:block; }

    /* ===================== ADDED: PRODUCT PREVIEW UI ===================== */
    /* preview bar sits under header, shows product title + first-line */
    #product-preview {
      position: fixed;
      top: calc(var(--header-height));
      left: 0;
      right: 0;
      z-index: 2250;
      display: none;
      justify-content: center;
      pointer-events: auto;
    }
    #product-preview.open { display:flex; animation: slideDown .18s ease forwards; }
    @keyframes slideDown { from { transform: translateY(-6px); opacity:0 } to { transform: translateY(0); opacity:1 } }

    .preview-inner {
      max-width: var(--container);
      width: calc(100% - 40px);
      background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(248,249,250,0.98));
      color: var(--text);
      border-radius: 10px;
      padding: 12px 16px;
      display: flex;
      gap: 12px;
      align-items: center;
      box-shadow: 0 18px 44px rgba(6,12,20,0.08);
      border: 1px solid rgba(6,12,20,0.04);
    }
    .preview-meta { flex: 1 1 auto; min-width: 0; }
    .preview-meta h4 { margin:0; font-size:16px; color:var(--brand); font-weight:800; }
    .preview-meta p { margin:6px 0 0; color:var(--muted); font-size:14px; line-height:1.35; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

    .preview-actions { display:flex; gap:8px; align-items:center; }
    .preview-actions .preview-btn { padding:8px 12px; border-radius:8px; font-weight:700; cursor:pointer; border:1px solid rgba(6,12,20,0.06); background:transparent; }
    .preview-actions .preview-btn.primary { background: linear-gradient(90deg,var(--brand),var(--brand-dark)); color:#fff; border:0; }
    .preview-close { background:transparent; border:0; font-size:18px; cursor:pointer; color:var(--muted); padding:6px; }

    /* small screens: ensure preview doesn't overlap other UI */
    @media (max-width:640px){
      .preview-inner { padding:10px; gap:8px; }
      .preview-meta p { white-space:normal; -webkit-line-clamp:2; display:-webkit-box; -webkit-box-orient:vertical; overflow:hidden; }
    }
    /* ================== END ADDED ================== */

  </style>
</head>
<body>

  <!-- HEADER -->
  <header class="header" role="banner">
    <div class="wrap">
      <div class="logo"><a href="home.html"><img src="https://www.davisglass.com.au/images/stat_imgs/TEMP-davis-glass-logo-header-WBG.jpg" alt="Davis Glass"></a></div>

      <nav class="nav" role="navigation" aria-label="Main navigation">
        <ul class="nav-list">
          <li class="nav-item"><a class="nav-link active" href="home.html">Home</a></li>
          <li class="nav-item has-mega">
            <button type="button" class="nav-btn" aria-expanded="false" aria-controls="mega">Products ▾</button>
          </li>
          <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
          <li class="nav-item"><a class="nav-link" href="resources.html">Resources</a></li>
          <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
        </ul>
      </nav>

      <button type="button" class="hamburger" aria-label="Menu" aria-expanded="false">
        <span class="bar bar1"></span><span class="bar bar2"></span><span class="bar bar3"></span>
      </button>
    </div>

    <!-- Mega panel -->
    <div id="mega" class="mega-panel" aria-hidden="true">
      <div class="backdrop" aria-hidden="true"></div>
      <div class="inner" role="dialog" aria-label="Products menu">
        <div class="mega-col">
          <h4>PRODUCTS</h4>
          <ul>
            <li><a href="products.html#laminate">Laminate</a></li>
            <li><a href="products.html#acoustic">Acoustic Laminate</a></li>
            <li><a href="products.html#lowe">Low e (Low Emissivity)</a></li>
            <li><a href="products.html#security">Security Laminate</a></li>
            <li><a href="products.html#mirror">Mirror</a></li>
            <li><a href="products.html#oneway">One way mirror</a></li>
          </ul>
        </div>

        <div class="mega-col">
          <h4>MERCHANDISING & SAFETY</h4>
          <ul>
            <li><a href="products.html#merch">Merchandising</a></li>
            <li><a href="products.html#sheets">Sheets</a></li>
            <li><a href="products.html#blocks">Blocks</a></li>
            <li><a href="products.html#toughened">Toughened Safety Glass</a></li>
            <li><a href="products.html#dgu">DGU’s</a></li>
          </ul>

          <h4 style="margin-top:14px">DGU Types</h4>
          <ul>
            <li><a href="products.html#dguclear">i) clear on clear</a></li>
            <li><a href="products.html#dgue">ii) E-tech on clear</a></li>
            <li><a href="products.html#thermalux">iii) ThermaLux</a></li>
            <li><a href="products.html#thermaluxplus">iv) ThermaLux Plus</a></li>
            <li><a href="products.html#thermale">v) ThermaLux Elite</a></li>
          </ul>
        </div>

        <div class="mega-right">
          <div class="feature-box">
            <h4>High performance Low-E</h4>
            <p>High performance Low-E single glazed options. Engineered for thermal efficiency while preserving daylight and views.</p>
          </div>
          <div class="feature-box">
            <h4>Partners</h4>
            <p>Soltech · Viridian · Evantage — contact our team for partner-specific product support.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Mobile panel -->
    <div class="mobile-panel" aria-hidden="true">
      <ul class="mobile-list">
        <li class="mobile-item"><a href="home.html">Home</a></li>
        <li class="mobile-item"><a href="products.html">Products</a></li>
        <li class="mobile-item"><a href="about.html">About</a></li>
        <li class="mobile-item"><a href="resources.html">Resources</a></li>
        <li class="mobile-item"><a href="contact.html">Contact</a></li>
      </ul>
    </div>
  </header>

  <!-- ================= ADDDED: PRODUCT PREVIEW (appears below header) ================= -->
  <div id="product-preview" aria-hidden="true" role="region" aria-label="Product quick preview">
    <div class="preview-inner">
      <div class="preview-meta">
        <h4 id="preview-title">Product</h4>
        <p id="preview-text">Product short description will appear here.</p>
      </div>
      <div class="preview-actions">
        <button id="preview-open" class="preview-btn primary" type="button">Open</button>
        <button id="preview-close" class="preview-close" title="Close preview" aria-label="Close preview">✕</button>
      </div>
    </div>
  </div>
  <!-- ================= END PREVIEW ================= -->

  <!-- HERO / SLIDER -->
  <section class="split-hero" aria-label="Homepage hero">
    <div class="wrap-hero">
      <div class="hero-area">
        <div class="hero-swiper swiper">
          <div class="swiper-wrapper">
            <div class="swiper-slide hero-slide">
              <div class="hero-bg" style="background-image:url('https://www.davisglass.com.au/images/stat_imgs/shutterstock_766324486.jpg')"></div>
              <div class="hero-card">
                <h2>Davis Glass — Performance &amp; Architectural Glass</h2>
                <p>Clarity, safety and thermal performance combined for modern architecture and fabrication.</p>
                <div class="btns">
                  <a class="btn brand-primary" href="#products-showcase-improved">Explore Products</a>
                  <a class="btn ghost" href="#contact">Request Sample</a>
                </div>
              </div>
            </div>

            <div class="swiper-slide hero-slide">
              <div class="hero-bg" style="background-image:url('https://images.unsplash.com/photo-1519710164239-da123dc03ef4?auto=format&fit=crop&w=2200&q=80')"></div>
              <div class="hero-card">
                <h2>Laminate &amp; Acoustic Solutions</h2>
                <p>High-performance laminates engineered for sound control and occupant protection.</p>
                <div class="btns">
                  <a class="btn brand-primary" href="#products-showcase-improved">Explore Laminate</a>
                  <a class="btn ghost" href="#specs">Download Specs</a>
                </div>
              </div>
            </div>

            <div class="swiper-slide hero-slide">
              <div class="hero-bg" style="background-image:url('https://images.unsplash.com/photo-1503602642458-232111445657?auto=format&fit=crop&w=2200&q=80')"></div>
              <div class="hero-card">
                <h2>Low-E Coatings &amp; DGU Performance</h2>
                <p>Improve thermal efficiency while preserving daylight and views with coated systems.</p>
                <div class="btns">
                  <a class="btn brand-primary" href="#products-showcase-improved">See Low-E Options</a>
                  <a class="btn ghost" href="#contact">Talk to an Expert</a>
                </div>
              </div>
            </div>
          </div>

          <button class="swiper-button-prev" aria-label="Previous slide"></button>
          <button class="swiper-button-next" aria-label="Next slide"></button>
          <div class="swiper-pagination"></div>
        </div>

        <div class="thumbs" role="tablist" aria-label="Hero thumbnails">
          <div class="thumb" data-index="0" style="background-image:url('https://www.davisglass.com.au/images/stat_imgs/shutterstock_766324486.jpg')" aria-label="Slide 1" role="button" tabindex="0"></div>
          <div class="thumb" data-index="1" style="background-image:url('https://images.unsplash.com/photo-1519710164239-da123dc03ef4?auto=format&fit=crop&w=800&q=60')" aria-label="Slide 2" role="button" tabindex="0"></div>
          <div class="thumb" data-index="2" style="background-image:url('https://images.unsplash.com/photo-1503602642458-232111445657?auto=format&fit=crop&w=800&q=60')" aria-label="Slide 3" role="button" tabindex="0"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- divider -->
  <svg class="wave-divider" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 60" preserveAspectRatio="none">
    <path d="M0,30 C150,60 300,0 600,30 C900,60 1050,0 1200,30 L1200 60 L0 60 Z" fill="#ffffff" opacity="0.95"></path>
  </svg>

  <!-- PRODUCTS -->
  <section id="products-showcase-improved" aria-label="Products showcase" class="products-showcase-improved">
    <div class="psi-inner container">
      <header class="psi-head" role="region" aria-labelledby="psi-title">
        <div>
          <h2 id="psi-title">Products & Systems</h2>
          <p class="psi-lead">Explore laminates, Low-E systems, toughened glass and DGU options — performance-led solutions for architecture and fabrication.</p>
        </div>

        <nav class="psi-filters" role="tablist" aria-label="Product filters">
          <button type="button" role="tab" aria-selected="true" data-filter="all" class="psi-tab">All</button>
          <button type="button" role="tab" aria-selected="false" data-filter="laminate" class="psi-tab">Laminate</button>
          <button type="button" role="tab" aria-selected="false" data-filter="acoustic" class="psi-tab">Acoustic Laminate</button>
          <button type="button" role="tab" aria-selected="false" data-filter="lowe" class="psi-tab">Low-E</button>
          <button type="button" role="tab" aria-selected="false" data-filter="security" class="psi-tab">Security Laminate</button>
          <button type="button" role="tab" aria-selected="false" data-filter="mirror" class="psi-tab">Mirror</button>
          <button type="button" role="tab" aria-selected="false" data-filter="oneway" class="psi-tab">One way mirror</button>
          <button type="button" role="tab" aria-selected="false" data-filter="merch" class="psi-tab">Merchandising</button>
          <button type="button" role="tab" aria-selected="false" data-filter="sheets" class="psi-tab">Sheets</button>
          <button type="button" role="tab" aria-selected="false" data-filter="blocks" class="psi-tab">Blocks</button>
          <button type="button" role="tab" aria-selected="false" data-filter="toughened" class="psi-tab">Toughened</button>
          <button type="button" role="tab" aria-selected="false" data-filter="dgu" class="psi-tab">DGU</button>
        </nav>
      </header>

      <div class="psi-grid" id="psiGrid" role="list">
        <!-- Laminate -->
        <article class="psi-card" data-type="laminate" role="listitem" tabindex="0" aria-labelledby="p-lam-1">
          <div class="psi-media" data-bg="https://images.unsplash.com/photo-1505691723518-36a6b86a7057?auto=format&fit=crop&w=1200&q=60"></div>
          <div class="psi-body">
            <span class="psi-badge">LAMINATE</span>
            <h3 id="p-lam-1" class="psi-title">Safety & Acoustic Laminates</h3>
            <p class="psi-desc">Multi-layer laminated glass engineered for occupant protection and noise control — bespoke thicknesses & interlayers.</p>
            <div class="psi-actions">
              <button type="button" class="psi-btn-primary psi-open-detail" data-title="Safety & Acoustic Laminates" data-type="laminate" data-img="https://images.unsplash.com/photo-1505691723518-36a6b86a7057?auto=format&fit=crop&w=1400&q=60">View</button>
              <a class="psi-btn-ghost" href="contact.html">Sample</a>
            </div>
          </div>
        </article>

        <!-- Acoustic Laminate -->
        <article class="psi-card" data-type="acoustic" role="listitem" tabindex="0" aria-labelledby="p-acoustic-1">
          <div class="psi-media" data-bg="https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&w=1200&q=60"></div>
          <div class="psi-body">
            <span class="psi-badge">ACOUSTIC</span>
            <h3 id="p-acoustic-1" class="psi-title">Acoustic Laminate Systems</h3>
            <p class="psi-desc">Specialised laminates designed to reduce reverberation and improve room acoustics for commercial and residential projects.</p>
            <div class="psi-actions">
              <button type="button" class="psi-btn-primary psi-open-detail" data-title="Acoustic Laminate Systems" data-type="acoustic" data-img="https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?auto=format&fit=crop&w=1400&q=60">Details</button>
              <a class="psi-btn-ghost" href="specs.html">Specs</a>
            </div>
          </div>
        </article>

        <!-- Low-E -->
        <article class="psi-card" data-type="lowe" role="listitem" tabindex="0" aria-labelledby="p-lowe-1">
          <div class="psi-media" data-bg="https://www.davisglass.com.au/images/db_imgs/Low-E-Glass-td1_5f3e09a9c00a6500.jpg"></div>
          <div class="psi-body">
            <span class="psi-badge">LOW-E</span>
            <h3 id="p-lowe-1" class="psi-title">Low-E (Low Emissivity)</h3>
            <p class="psi-desc">High performance Low-E coatings and single glazed options for solar control and improved thermal performance.</p>
            <div class="psi-actions">
              <button type="button" class="psi-btn-primary psi-open-detail" data-title="Low-E Coatings & DGU" data-type="lowe" data-img="https://www.davisglass.com.au/images/db_imgs/Low-E-Glass-td1_5f3e09a9c00a6500.jpg">Options</button>
              <a class="psi-btn-ghost" href="contact.html">Contact</a>
            </div>
          </div>
        </article>

        <!-- Security Laminate -->
        <article class="psi-card" data-type="security" role="listitem" tabindex="0" aria-labelledby="p-security-1">
          <div class="psi-media" data-bg="https://images.unsplash.com/photo-1519710164239-da123dc03ef4?auto=format&fit=crop&w=1200&q=60"></div>
          <div class="psi-body">
            <span class="psi-badge">SECURITY</span>
            <h3 id="p-security-1" class="psi-title">Security Laminate</h3>
            <p class="psi-desc">Security-grade laminates for forced entry resistance, ballistic and impact-rated applications.</p>
            <div class="psi-actions">
              <button type="button" class="psi-btn-primary psi-open-detail" data-title="Security Laminate" data-type="security" data-img="https://images.unsplash.com/photo-1519710164239-da123dc03ef4?auto=format&fit=crop&w=1400&q=60">Learn</button>
              <a class="psi-btn-ghost" href="contact.html">Enquire</a>
            </div>
          </div>
        </article>

        <!-- Mirror -->
        <article class="psi-card" data-type="mirror" role="listitem" tabindex="0" aria-labelledby="p-mirror-1">
          <div class="psi-media" data-bg="https://images.unsplash.com/photo-1545249390-1b957870a1fb?auto=format&fit=crop&w=1200&q=60"></div>
          <div class="psi-body">
            <span class="psi-badge">MIRROR</span>
            <h3 id="p-mirror-1" class="psi-title">Mirror</h3>
            <p class="psi-desc">High quality mirrors for interior, architectural and display use — various finishes and backing options.</p>
            <div class="psi-actions">
              <button type="button" class="psi-btn-primary psi-open-detail" data-title="Mirror" data-type="mirror" data-img="https://images.unsplash.com/photo-1545249390-1b957870a1fb?auto=format&fit=crop&w=1400&q=60">View</button>
              <a class="psi-btn-ghost" href="contact.html">Sample</a>
            </div>
          </div>
        </article>

        <!-- One way mirror -->
        <article class="psi-card" data-type="oneway" role="listitem" tabindex="0" aria-labelledby="p-oneway-1">
          <div class="psi-media" data-bg="https://images.unsplash.com/photo-1524758631624-e2822e304c36?auto=format&fit=crop&w=1200&q=60"></div>
          <div class="psi-body">
            <span class="psi-badge">ONE WAY</span>
            <h3 id="p-oneway-1" class="psi-title">One Way Mirror</h3>
            <p class="psi-desc">One-way vision systems for observation rooms, security and privacy applications.</p>
            <div class="psi-actions">
              <button type="button" class="psi-btn-primary psi-open-detail" data-title="One Way Mirror" data-type="oneway" data-img="https://images.unsplash.com/photo-1524758631624-e2822e304c36?auto=format&fit=crop&w=1400&q=60">See</button>
              <a class="psi-btn-ghost" href="contact.html">Enquire</a>
            </div>
          </div>
        </article>

        <!-- Merchandising -->
        <article class="psi-card" data-type="merch" role="listitem" tabindex="0" aria-labelledby="p-merch-1">
          <div class="psi-media" data-bg="https://images.unsplash.com/photo-1520975918720-5d2df914c8a1?auto=format&fit=crop&w=1200&q=60"></div>
          <div class="psi-body">
            <span class="psi-badge">MERCH</span>
            <h3 id="p-merch-1" class="psi-title">Merchandising</h3>
            <p class="psi-desc">Display glass and fabricated merchandising solutions for retail and exhibition environments.</p>
            <div class="psi-actions">
              <button type="button" class="psi-btn-primary psi-open-detail" data-title="Merchandising" data-type="merch" data-img="https://images.unsplash.com/photo-1520975918720-5d2df914c8a1?auto=format&fit=crop&w=1400&q=60">See</button>
              <a class="psi-btn-ghost" href="contact.html">Sample</a>
            </div>
          </div>
        </article>

        <!-- Sheets -->
        <article class="psi-card" data-type="sheets" role="listitem" tabindex="0" aria-labelledby="p-sheets-1">
          <div class="psi-media" data-bg="https://images.unsplash.com/photo-1526178611113-5b52a0d8de13?auto=format&fit=crop&w=1200&q=60"></div>
          <div class="psi-body">
            <span class="psi-badge">SHEETS</span>
            <h3 id="p-sheets-1" class="psi-title">Sheets</h3>
            <p class="psi-desc">Flat glass sheets available in a range of thicknesses for fabrication and finishing.</p>
            <div class="psi-actions">
              <button type="button" class="psi-btn-primary psi-open-detail" data-title="Sheets" data-type="sheets" data-img="https://images.unsplash.com/photo-1526178611113-5b52a0d8de13?auto=format&fit=crop&w=1400&q=60">View</button>
              <a class="psi-btn-ghost" href="contact.html">Order</a>
            </div>
          </div>
        </article>

        <!-- Blocks -->
        <article class="psi-card" data-type="blocks" role="listitem" tabindex="0" aria-labelledby="p-blocks-1">
          <div class="psi-media" data-bg="https://images.unsplash.com/photo-1495433324511-bf8e92934d90?auto=format&fit=crop&w=1200&q=60"></div>
          <div class="psi-body">
            <span class="psi-badge">BLOCKS</span>
            <h3 id="p-blocks-1" class="psi-title">Blocks</h3>
            <p class="psi-desc">Solid glass blocks for architectural features, partitions and light-transmitting walls.</p>
            <div class="psi-actions">
              <button type="button" class="psi-btn-primary psi-open-detail" data-title="Blocks" data-type="blocks" data-img="https://images.unsplash.com/photo-1495433324511-bf8e92934d90?auto=format&fit=crop&w=1400&q=60">See</button>
              <a class="psi-btn-ghost" href="contact.html">Sample</a>
            </div>
          </div>
        </article>

        <!-- Toughened Safety Glass -->
        <article class="psi-card" data-type="toughened" role="listitem" tabindex="0" aria-labelledby="p-tough-1">
          <div class="psi-media" data-bg="https://www.davisglass.com.au/images/page_imgs/thc_cat_693714901-w600-q100-5b00cf548fb62.jpg"></div>
          <div class="psi-body">
            <span class="psi-badge">TOUGHENED</span>
            <h3 id="p-tough-1" class="psi-title">Toughened Safety Glass</h3>
            <p class="psi-desc">Tempered glass with certified impact resistance — ideal for doors, façades and balustrades.</p>
            <div class="psi-actions">
              <button type="button" class="psi-btn-primary psi-open-detail" data-title="Toughened Safety Glass" data-type="toughened" data-img="https://www.davisglass.com.au/images/page_imgs/thc_cat_693714901-w600-q100-5b00cf548fb62.jpg">Learn</button>
              <a class="psi-btn-ghost" href="contact.html">Enquire</a>
            </div>
          </div>
        </article>

        <!-- DGU with details -->
        <article class="psi-card" data-type="dgu" role="listitem" tabindex="0" aria-labelledby="p-dgu-1">
          <div class="psi-media" data-bg="https://images.unsplash.com/photo-1525518009166-2d2c2f6d6f8f?auto=format&fit=crop&w=1200&q=60"></div>
          <div class="psi-body">
            <span class="psi-badge">DGU</span>
            <h3 id="p-dgu-1" class="psi-title">DGU Types & Options</h3>
            <p class="psi-desc">Double glazed unit options for thermal performance and solar control. Choose from the following:</p>

            <div class="psi-accordion">
              <button type="button" class="psi-accordion-toggle" aria-expanded="false" aria-controls="dgu-list-1">See DGU Types ▾</button>
              <ul id="dgu-list-1" class="psi-accordion-panel" hidden>
                <li><strong>i) clear on clear</strong> — standard DGU with clear glass.</li>
                <li><strong>ii) E-tech on clear</strong> — coated performance layer for solar control.</li>
                <li><strong>iii) ThermaLux</strong> — entry-level thermal performance DGU.</li>
                <li><strong>iv) ThermaLux Plus</strong> — improved U-value and insulating performance.</li>
                <li><strong>v) ThermaLux Elite</strong> — top-tier thermal efficiency and glazing options.</li>
              </ul>
            </div>

            <div class="psi-actions">
              <button type="button" class="psi-btn-primary psi-open-detail" data-title="DGU Types & Options" data-type="dgu" data-img="https://images.unsplash.com/photo-1525518009166-2d2c2f6d6f8f?auto=format&fit=crop&w=1400&q=60">Explore</button>
              <a class="psi-btn-ghost" href="contact.html">Talk</a>
            </div>
          </div>
        </article>

      </div>

      <div class="psi-footer muted" style="margin-top:18px;">
        <small>Partners: Soltech · Viridian · Evantage — contact our team for partner-specific product support.</small>
      </div>
    </div>
  </section>

  <!-- Modal -->
  <div id="psiModalBackdrop" class="psi-modal-backdrop" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="psiModalTitle">
    <div class="psi-modal" role="document">
      <div style="display:flex;align-items:center;gap:12px;padding:12px 16px;border-bottom:1px solid #eee; justify-content: space-between;">
        <h3 id="psiModalTitle" style="margin:0;color:var(--brand)">Product detail</h3>
        <button id="psiModalClose" class="close-btn" aria-label="Close product details">✕</button>
      </div>
      <div class="modal-body" style="padding:18px;">
        <div class="modal-media" id="psiModalMedia" style="background-image:none;background-size:cover;background-position:center;"></div>
        <div class="modal-info">
          <h3 id="psiModalHeading" style="margin-top:0"></h3>
          <p id="psiModalCopy" style="color:var(--muted)"></p>
          <ul id="psiModalSpecs" style="margin:10px 0 0 16px;color:var(--muted)"></ul>
          <div class="modal-actions" style="display:flex;gap:10px;margin-top:16px;">
            <a id="psiModalPrimary" class="psi-btn-primary" href="#">View product page</a>
            <a id="psiModalContact" class="psi-btn-ghost" href="contact.html">Contact us</a>
          </div>
        </div>
      </div>
    </div>
  </div>



  <!-- footer -->
  <footer class="footer" id="contact">
    <div class="grid">
      <div class="brand">
        <img src="https://www.davisglass.com.au/images/stat_imgs/TEMP-davis-glass-logo-header-WBG.jpg" alt="logo">
        <p style="margin-top:8px;color:#cbd7e2">Davis Glass — Architectural &amp; performance glass. Technical support and product specs for designers and fabricators.</p>
        <p style="margin-top:8px;color:#cbd7e2;font-size:13px;"><strong>Partners:</strong> Soltech · Viridian · Evantage</p>
      </div>
      <div class="links">
        <strong style="color:#e6eef6">Products</strong>
        <a class="footer-links" href="products.html#laminate">Laminate</a>
        <a class="footer-links" href="products.html#lowe">Low-E</a>
        <a class="footer-links" href="products.html#dgu">DGU</a>
      </div>
      <div class="contact">
        <strong style="color:#e6eef6">Contact</strong>
        <div class="footer-contact">(03) 9330 1200</div>
        <div class="footer-contact">156 Melrose Drive, Tullamarine VIC 3043</div>
      </div>
    </div>
  </footer>

  <div id="dev-log" aria-hidden="true"></div>

  <!-- SCRIPTS -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

  <script>
    // dev logger toggle (Ctrl/Cmd + D)
    (function(){
      const logBox = document.getElementById('dev-log');
      function showLog(msg){ if(!logBox) return; logBox.classList.add('show'); const line = document.createElement('div'); line.textContent = (new Date()).toLocaleTimeString() + ' — ' + msg; logBox.appendChild(line); logBox.scrollTop = logBox.scrollHeight; console.debug(msg); }
      window.__devLog = showLog;
      window.addEventListener('error', function(e){ showLog('Error: ' + (e.message || e)); });
      window.addEventListener('unhandledrejection', function(ev){ showLog('Promise rejection: ' + (ev.reason && (ev.reason.message || ev.reason)) ); });
      window.addEventListener('keydown', function(e){ if(e.key === 'D' && (e.ctrlKey || e.metaKey)) { logBox.classList.toggle('show'); logBox.setAttribute('aria-hidden', logBox.classList.contains('show') ? 'false' : 'true'); }}); 
    })();
  </script>

  <script>
    // set --vh for mobile
    (function(){ function setVh(){ document.documentElement.style.setProperty('--vh', (window.innerHeight * 0.01) + 'px'); } setVh(); window.addEventListener('resize', setVh); })();
  </script>

  <script>
    // INIT: hero, thumbs, backgrounds
    document.addEventListener('DOMContentLoaded', function(){
      try {
        // hero swiper
        const hero = new Swiper('.hero-swiper', {
          loop: true,
          effect: 'fade',
          fadeEffect: { crossFade: true },
          speed: 900,
          autoplay: { delay: 5200, disableOnInteraction: false },
          navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },
          pagination: { el: '.swiper-pagination', clickable: true },
          keyboard: { enabled: true, onlyInViewport: true },
        });

        // thumbs control
        const thumbs = Array.from(document.querySelectorAll('.thumb'));
        function setActiveThumb(idx){ thumbs.forEach((t,i)=> t.classList.toggle('active', i===idx)); }
        setActiveThumb(0);
        hero.on('slideChange', function(){ setActiveThumb(hero.realIndex); });
        thumbs.forEach(t=>{
          t.addEventListener('click', ()=> hero.slideToLoop(Number(t.dataset.index)));
          t.addEventListener('keydown', function(e){ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); t.click(); } });
        });

        // product images: apply backgrounds
        document.querySelectorAll('.psi-media').forEach(media => { const s = media.dataset.bg; if(s) media.style.backgroundImage = `url('${s}')`; });

      } catch(err){
        window.__devLog && window.__devLog('Init error: ' + err.message);
      }
    });
  </script>

  <script>
    // Mega + mobile toggles
    (function(){
      function $$(s){ return Array.from(document.querySelectorAll(s)); }
      document.addEventListener('DOMContentLoaded', function(){
        try {
          const megaItem = document.querySelector('.nav-item.has-mega');
          const megaPanel = document.querySelector('.mega-panel');
          const productsBtn = document.querySelector('.nav-item.has-mega .nav-btn');
          const hamburger = document.querySelector('.hamburger');
          const mobilePanel = document.querySelector('.mobile-panel');
          const backdrop = megaPanel && megaPanel.querySelector('.backdrop');
          const isMobile = () => window.innerWidth <= 980;

          if(megaItem && megaPanel && productsBtn){
            productsBtn.setAttribute('aria-expanded', 'false');
            megaPanel.setAttribute('aria-hidden', 'true');

            function openMega(){ megaPanel.classList.add('open'); productsBtn.setAttribute('aria-expanded','true'); megaPanel.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden'; const first = megaPanel.querySelector('a,button,[tabindex]:not([tabindex="-1"])'); if(first) first.focus(); }
            function closeMega(returnFocus=true){ megaPanel.classList.remove('open'); productsBtn.setAttribute('aria-expanded','false'); megaPanel.setAttribute('aria-hidden','true'); document.body.style.overflow=''; if(returnFocus){ try{ productsBtn.focus({preventScroll:true}); }catch(e){} } }

            productsBtn.addEventListener('click', function(e){
              e.preventDefault(); e.stopPropagation();
              if(isMobile()){
                if(mobilePanel){ mobilePanel.classList.add('open'); hamburger && hamburger.classList.add('open'); document.body.style.overflow = 'hidden'; }
                return;
              }
              if(megaPanel.classList.contains('open')) closeMega(); else openMega();
            });

            if(backdrop) backdrop.addEventListener('click', function(e){ e.stopPropagation(); closeMega(); });
            $$('.mega-panel a').forEach(a => a.addEventListener('click', function(){ closeMega(false); }));
            document.addEventListener('click', function(e){ if(!megaPanel.classList.contains('open')) return; if(e.target.closest('.mega-panel') || e.target.closest('.nav-item.has-mega')) return; closeMega(); });
            document.addEventListener('keydown', function(e){
              if(e.key === 'Escape' || e.key === 'Esc'){
                if(megaPanel.classList.contains('open')) { e.preventDefault(); closeMega(); }
                if(mobilePanel && mobilePanel.classList.contains('open')){ mobilePanel.classList.remove('open'); hamburger && hamburger.classList.remove('open'); document.body.style.overflow=''; }
              }
            });
            window.addEventListener('resize', function(){ if(isMobile()) closeMega(); });
          }

          if(hamburger){
            hamburger.addEventListener('click', function(e){ e.stopPropagation(); const open = hamburger.classList.toggle('open'); if(open){ mobilePanel && mobilePanel.classList.add('open'); document.body.style.overflow='hidden'; } else { mobilePanel && mobilePanel.classList.remove('open'); document.body.style.overflow=''; } });
            $$('.mobile-panel a').forEach(a => a.addEventListener('click', function(){ document.querySelector('.mobile-panel')?.classList.remove('open'); document.querySelector('.hamburger')?.classList.remove('open'); document.body.style.overflow=''; }));
            document.addEventListener('click', function(e){ if(!mobilePanel) return; if(!e.target.closest('.mobile-panel') && !e.target.closest('.hamburger')){ if(mobilePanel.classList.contains('open')){ mobilePanel.classList.remove('open'); hamburger.classList.remove('open'); document.body.style.overflow=''; } } });
          }
        } catch(err){ window.__devLog && window.__devLog('Mega menu error: ' + err.message); }
      });
    })();
  </script>

  <script>
    // Products: filters, accordion, modal (delegated)
    document.addEventListener('DOMContentLoaded', function(){
      try {
        const root = document.getElementById('products-showcase-improved');
        if(!root) return;
        const filtersNav = root.querySelector('.psi-filters');
        const cards = Array.from(root.querySelectorAll('.psi-card'));
        // ensure tabs have dataset.filter
        root.querySelectorAll('.psi-tab').forEach(t => { if(!t.dataset.filter){ t.dataset.filter = (t.textContent||'').trim().toLowerCase().replace(/\s+/g,'-') || 'all'; } });

        filtersNav.addEventListener('click', function(e){
          const btn = e.target.closest('.psi-tab');
          if(!btn) return;
          const filter = btn.dataset.filter || 'all';
          // update aria-selected
          root.querySelectorAll('.psi-tab').forEach(t => t.setAttribute('aria-selected', t.dataset.filter === filter ? 'true' : 'false'));
          // show/hide cards
          cards.forEach(c => {
            const type = (c.dataset.type || 'all').toLowerCase();
            if (filter === 'all' || type === filter) {
              c.classList.remove('hidden');
              c.style.display = '';
            } else {
                c.classList.add('hidden');
                c.style.display = 'none';
            }
          });
          const first = root.querySelector('.psi-card:not(.hidden)');
          if(first) first.focus({preventScroll:true});
        });

        // accordions
        root.querySelectorAll('.psi-accordion-toggle').forEach(btn => {
          const id = btn.getAttribute('aria-controls');
          const panel = root.querySelector('#' + id);
          if(!panel) return;
          panel.hidden = true;
          btn.setAttribute('aria-expanded','false');
          btn.addEventListener('click', function(){
            const open = btn.getAttribute('aria-expanded') === 'true';
            btn.setAttribute('aria-expanded', String(!open));
            panel.hidden = open;
          });
        });

        // modal
        const modalBackdrop = document.getElementById('psiModalBackdrop');
        const modalHeading = document.getElementById('psiModalHeading');
        const modalCopy = document.getElementById('psiModalCopy');
        const modalMedia = document.getElementById('psiModalMedia');
        const modalPrimary = document.getElementById('psiModalPrimary');
        const modalClose = document.getElementById('psiModalClose');

        function openModal({ title = '', type = 'product', image = '', href = '#' } = {}){ 
          modalHeading.textContent = title;
          modalCopy.textContent = 'Detailed information about ' + title + '. Contact us for specs, samples and pricing.';
          modalMedia.style.backgroundImage = image ? `url('${image}')` : '';
          modalPrimary.href = href;
          modalPrimary.textContent = 'View ' + (type === 'dgu' ? 'DGU Options' : 'Product page');
          modalBackdrop.classList.add('open');
          modalBackdrop.setAttribute('aria-hidden','false');
          modalClose.focus();
          document.body.style.overflow = 'hidden';
        }
        function closeModal(){ modalBackdrop.classList.remove('open'); modalBackdrop.setAttribute('aria-hidden','true'); document.body.style.overflow = ''; }

        root.addEventListener('click', function(e){
          const btn = e.target.closest('.psi-open-detail');
          if(!btn) return;
          const title = btn.dataset.title || 'Product';
          const type = btn.dataset.type || 'product';
          const img = btn.dataset.img || '';
          const href = 'products.html#' + (type || 'product');
          openModal({ title, type, image: img, href });
        });

        // Also support psi-btn-primary inside cards (they may not have psi-open-detail class)
        root.addEventListener('click', function(e){
          const btn = e.target.closest('.psi-btn-primary');
          if(!btn) return;
          // if it has data-title -> use modal, else ignore
          if(btn.dataset && btn.dataset.title){
            const title = btn.dataset.title || 'Product';
            const type = btn.dataset.type || 'product';
            const img = btn.dataset.img || '';
            const href = 'products.html#' + (type || 'product');
            openModal({ title, type, image: img, href });
          }
        });

        modalClose && modalClose.addEventListener('click', closeModal);
        modalBackdrop && modalBackdrop.addEventListener('click', function(e){ if(e.target === modalBackdrop) closeModal(); });
        document.addEventListener('keydown', function(e){ if(e.key === 'Escape' && modalBackdrop.classList.contains('open')) closeModal(); });

      } catch(err){ window.__devLog && window.__devLog('Products script error: ' + err.message); }
    });
  </script>

  <!-- ================== ADDED SCRIPT: wire product preview from clicks (mega links + cards + footer links) ================== -->
  <script>
    (function(){
      const summaries = {
        "laminate": "Multi-layer laminated glass engineered for occupant protection and noise control — bespoke thicknesses & interlayers.",
        "acoustic": "Specialised laminates designed to reduce reverberation and improve room acoustics for commercial and residential projects.",
        "lowe": "High performance Low-E coatings and single glazed options for solar control and improved thermal performance.",
        "security": "Security-grade laminates for forced entry resistance, ballistic and impact-rated applications.",
        "mirror": "High quality mirrors for interior, architectural and display use — various finishes and backing options.",
        "oneway": "One-way vision systems for observation rooms, security and privacy applications.",
        "merch": "Display glass and fabricated merchandising solutions for retail and exhibition environments.",
        "sheets": "Flat glass sheets available in a range of thicknesses for fabrication and finishing.",
        "blocks": "Solid glass blocks for architectural features, partitions and light-transmitting walls.",
        "toughened": "Tempered glass with certified impact resistance — ideal for doors, façades and balustrades.",
        "dgu": "Double glazed unit options for thermal performance and solar control. Choose from clear on clear, E-tech and ThermaLux ranges."
      };

      function normalizeKey(text){
        if(!text) return '';
        let t = text.trim().toLowerCase();
        // common variations
        t = t.replace(/\b(low[\s-]*e|low[-\s]*e)\b/,'lowe');
        t = t.replace(/\b(one[\s-]*way|one[-\s]*way)\b/,'oneway');
        t = t.replace(/\b(acoustic)\b/,'acoustic');
        t = t.replace(/\s+/g,' ');
        // try match known keys
        for(const k of Object.keys(summaries)){
          if(t.includes(k)) return k;
        }
        // fallback: words to keys mapping
        if(t.includes('laminate')) return 'laminate';
        if(t.includes('low')) return 'lowe';
        if(t.includes('dgu')) return 'dgu';
        return '';
      }

      function showPreview(title, key){
        const preview = document.getElementById('product-preview');
        const previewTitle = document.getElementById('preview-title');
        const previewText = document.getElementById('preview-text');
        if(!preview || !previewTitle || !previewText) return;

        previewTitle.textContent = title || (key || 'Product');
        previewText.textContent = summaries[key] || summaries[normalizeKey(title)] || 'Specification coming soon.';
        preview.classList.add('open');
        preview.setAttribute('aria-hidden','false');
        preview.dataset.key = key || normalizeKey(title) || '';
      }

      function hidePreview(){
        const preview = document.getElementById('product-preview');
        if(!preview) return;
        preview.classList.remove('open');
        preview.setAttribute('aria-hidden','true');
        preview.dataset.key = '';
      }

      document.addEventListener('DOMContentLoaded', function(){
        try {
          // Handle mega menu links (prevent navigation — show preview)
          document.querySelectorAll('#mega .inner a, .mobile-panel a, .footer .footer-links').forEach(a=>{
            a.addEventListener('click', function(e){
              const rawText = (a.textContent || a.innerText || '').replace(/^\d+\)\s*/,'').trim();
              const key = normalizeKey(rawText) || (a.getAttribute('href')||'').split('#')[1] || rawText.toLowerCase();
              // if href points to another page (products.html) we still show preview and prevent default
              e.preventDefault();
              showPreview(rawText, key);
            });
          });

          // When clicking card title or the primary button on card, show preview (don't open modal)
          document.querySelectorAll('.psi-card').forEach(card=>{
            const titleEl = card.querySelector('.psi-title');
            const badge = card.querySelector('.psi-badge');
            const type = card.dataset.type || '';
            const short = card.querySelector('.psi-desc') ? card.querySelector('.psi-desc').innerText.trim() : '';
            // clicking title shows preview
            if(titleEl){
              titleEl.style.cursor = 'pointer';
              titleEl.addEventListener('click', function(e){
                const title = titleEl.textContent.trim();
                showPreview(title, type || normalizeKey(title));
              });
            }
            // clicking the primary "psi-btn-primary" should open modal (existing behavior)
            // but to allow preview when user clicks the secondary link text (if desired), also add:
            const primaryBtn = card.querySelector('.psi-btn-primary');
            if(primaryBtn){
              // if user ctrl/cmd clicks or alt -> keep existing modal behaviour. We will still show preview on simple click while maintaining modal handler
              primaryBtn.addEventListener('click', function(e){
                // If it has dataset.title, show preview first (non-blocking); existing modal handler will still open afterwards because event bubbles
                const title = primaryBtn.dataset.title || card.querySelector('.psi-title')?.textContent || '';
                if(title){
                  showPreview(title, primaryBtn.dataset.type || type || normalizeKey(title));
                  // allow modal to open (existing click listeners will handle)
                }
              }, { passive: true });
            }
          });

          // Preview controls
          const previewClose = document.getElementById('preview-close');
          const previewOpen = document.getElementById('preview-open');

          previewClose && previewClose.addEventListener('click', function(){ hidePreview(); });

          previewOpen && previewOpen.addEventListener('click', function(){
            const preview = document.getElementById('product-preview');
            if(!preview) return;
            const key = preview.dataset.key;
            // Try to find a card with matching data-type and focus/scroll to it
            if(key){
              const targetCard = document.querySelector('.psi-card[data-type="'+key+'"]');
              if(targetCard){
                hidePreview();
                targetCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                // highlight briefly
                targetCard.style.transition = 'box-shadow .25s, transform .25s';
                targetCard.style.transform = 'translateY(-4px)';
                setTimeout(()=> targetCard.style.transform = '', 500);
                return;
              }
              // fallback: try to navigate to anchor on page if exists
              const anchor = document.getElementById(key) || document.querySelector('[id^="'+key+'"]');
              if(anchor){
                hidePreview();
                anchor.scrollIntoView({ behavior: 'smooth', block: 'start' });
                return;
              }
            }
            // If no matching element, fallback to opening products page (original link)
            hidePreview();
            window.location.href = 'products.html#' + (key || '');
          });

          // Close preview when pressing Escape
          document.addEventListener('keydown', function(e){
            if(e.key === 'Escape' || e.key === 'Esc') hidePreview();
          });

          // Close preview on outside clicks (but ignore clicks inside preview)
          document.addEventListener('click', function(e){
            const preview = document.getElementById('product-preview');
            if(!preview || !preview.classList.contains('open')) return;
            if(e.target.closest('#product-preview')) return;
            // if clicking a product link or card, we want preview to remain (those handlers call showPreview)
            const isProductTarget = !!e.target.closest('.psi-card, #mega .inner a, .mobile-panel a, .footer .footer-links');
            if(isProductTarget) return;
            hidePreview();
          });

        } catch(err){
          window.__devLog && window.__devLog('Preview init error: ' + (err && err.message));
        }
      });
    })();
  </script>
  <!-- ================== END ADDED SCRIPT ================== -->

  <script>
    // existing scripts below remain unchanged...
  </script>
</body>
</html>
